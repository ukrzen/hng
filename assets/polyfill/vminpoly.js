!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e)}(this,function(e){function t(e){return q(e,48,57)}function n(e){return t(e)||q(e,65,70)||q(e,97,102)}function r(e){return q(e,65,90)}function o(e){return q(e,97,122)}function a(e){return r(e)||o(e)}function i(e){return e>=160}function u(e){return a(e)||i(e)||95==e}function p(e){return u(e)||t(e)||45==e}function s(e){return q(e,0,8)||q(e,14,31)||q(e,127,159)}function c(e){return 10==e||12==e}function l(e){return c(e)||9==e||32==e}function f(e){return c(e)||isNaN(e)}function d(e,r){void 0==r&&(r={transformFunctionWhitespace:!1,scientificNotation:!1});for(var o,a,i=-1,d=[],h="data",y=0,U=0,q=0,Y=function(){y+=1,q=U,U=0},X={line:y,column:U},j=function(t){return void 0===t&&(t=1),e.charCodeAt(i+t)},K=function(t){return void 0===t&&(t=1),i+=t,o=e.charCodeAt(i),c(o)?Y():U+=t,!0},z=function(){return i-=1,c(o)?(y-=1,U=q):U-=1,X.line=y,X.column=U,!0},Q=function(){return i>=e.length},V=function(){},Z=function(e){return e?e.finish():e=a.finish(),r.loc===!0&&(e.loc={},e.loc.start={line:X.line,column:X.column},X={line:y,column:U},e.loc.end=X),d.push(e),a=void 0,!0},$=function(e){return a=e,!0},_=function(){return console.log("Parse error at index "+i+", processing codepoint 0x"+o.toString(16)+" in state "+h+"."),!0},ee=function(e){return console.log("MAJOR SPEC ERROR: "+e),!0},te=function(e){return h=e,!0},ne=function(){if(K(),n(o)){for(var e=[],t=0;6>t&&n(o);t++)e.push(o),K();var r=parseInt(e.map(String.fromCharCode).join(""),16);return r>B&&(r=65533),l(o)||z(),r}return o};;){if(i>2*e.length)return"I'm infinite-looping!";switch(K(),h){case"data":if(l(o))for(Z(new k);l(j());)K();else if(34==o)te("double-quote-string");else if(35==o)te("hash");else if(39==o)te("single-quote-string");else if(40==o)Z(new C);else if(41==o)Z(new I);else if(43==o)t(j())||46==j()&&t(j(2))?te("number")&&z():Z(new R(o));else if(45==o)45==j(1)&&62==j(2)?K(2)&&Z(new S):t(j())||46==j(1)&&t(j(2))?te("number")&&z():te("ident")&&z();else if(46==o)t(j())?te("number")&&z():Z(new R(o));else if(47==o)42==j()?K()&&te("comment"):Z(new R(o));else if(58==o)Z(new g);else if(59==o)Z(new T);else if(60==o)33==j(1)&&45==j(2)&&45==j(3)?K(3)&&Z(new m):Z(new R(o));else if(64==o)te("at-keyword");else if(91==o)Z(new N);else if(92==o)f(j())?_()&&Z(new R(o)):te("ident")&&z();else if(93==o)Z(new O);else if(123==o)Z(new b);else if(125==o)Z(new E);else if(t(o))te("number")&&z();else if(85==o||117==o)43==j(1)&&n(j(2))?K()&&te("unicode-range"):te("ident")&&z();else if(u(o))te("ident")&&z();else{if(Q())return Z(new A),d;Z(new R(o))}break;case"double-quote-string":void 0==a&&$(new F),34==o?Z()&&te("data"):Q()?_()&&Z()&&te("data")&&z():c(o)?_()&&Z(new w)&&te("data")&&z():92==o?f(j())?_()&&Z(new w)&&te("data"):c(j())?K():a.append(ne()):a.append(o);break;case"single-quote-string":void 0==a&&$(new F),39==o?Z()&&te("data"):Q()?_()&&Z()&&te("data"):c(o)?_()&&Z(new w)&&te("data")&&z():92==o?f(j())?_()&&Z(new w)&&te("data"):c(j())?K():a.append(ne()):a.append(o);break;case"hash":p(o)?$(new H(o))&&te("hash-rest"):92==o?f(j())?_()&&Z(new R(35))&&te("data")&&z():$(new H(ne()))&&te("hash-rest"):Z(new R(35))&&te("data")&&z();break;case"hash-rest":p(o)?a.append(o):92==o?f(j())?_()&&Z()&&te("data")&&z():a.append(ne()):Z()&&te("data")&&z();break;case"comment":42==o?47==j()?K()&&te("data"):V():Q()?_()&&te("data")&&z():V();break;case"at-keyword":45==o?u(j())?$(new M(45))&&te("at-keyword-rest"):92!=j(1)||f(j(2))?_()&&Z(new R(64))&&te("data")&&z():$(new AtKeywordtoken(45))&&te("at-keyword-rest"):u(o)?$(new M(o))&&te("at-keyword-rest"):92==o?f(j())?_()&&Z(new R(35))&&te("data")&&z():$(new M(ne()))&&te("at-keyword-rest"):Z(new R(64))&&te("data")&&z();break;case"at-keyword-rest":p(o)?a.append(o):92==o?f(j())?_()&&Z()&&te("data")&&z():a.append(ne()):Z()&&te("data")&&z();break;case"ident":45==o?u(j())?$(new D(o))&&te("ident-rest"):92!=j(1)||f(j(2))?Z(new R(45))&&te("data"):$(new D(o))&&te("ident-rest"):u(o)?$(new D(o))&&te("ident-rest"):92==o?f(j())?_()&&te("data")&&z():$(new D(ne()))&&te("ident-rest"):ee("Hit the generic 'else' clause in ident state.")&&te("data")&&z();break;case"ident-rest":p(o)?a.append(o):92==o?f(j())?_()&&Z()&&te("data")&&z():a.append(ne()):40==o?a.ASCIImatch("url")?te("url"):Z(new L(a))&&te("data"):l(o)&&r.transformFunctionWhitespace?te("transform-function-whitespace")&&z():Z()&&te("data")&&z();break;case"transform-function-whitespace":l(j())?V():40==o?Z(new L(a))&&te("data"):Z()&&te("data")&&z();break;case"number":$(new J),45==o?t(j())?K()&&a.append([45,o])&&te("number-rest"):46==j(1)&&t(j(2))?K(2)&&a.append([45,46,o])&&te("number-fraction"):te("data")&&z():43==o?t(j())?K()&&a.append([43,o])&&te("number-rest"):46==j(1)&&t(j(2))?K(2)&&a.append([43,46,o])&&te("number-fraction"):te("data")&&z():t(o)?a.append(o)&&te("number-rest"):46==o&&t(j())?K()&&a.append([46,o])&&te("number-fraction"):te("data")&&z();break;case"number-rest":t(o)?a.append(o):46==o?t(j())?K()&&a.append([46,o])&&te("number-fraction"):Z()&&te("data")&&z():37==o?Z(new P(a))&&te("data"):69==o||101==o?t(j())?K()&&a.append([37,o])&&te("sci-notation"):43!=j(1)&&45!=j(1)||!t(j(2))?$(new W(a,o))&&te("dimension"):a.append([37,j(1),j(2)])&&K(2)&&te("sci-notation"):45==o?u(j())?K()&&$(new W(a,[45,o]))&&te("dimension"):92==j(1)&&f(j(2))?_()&&Z()&&te("data")&&z():92==j(1)?K()&&$(new W(a,[45,ne()]))&&te("dimension"):Z()&&te("data")&&z():u(o)?$(new W(a,o))&&te("dimension"):92==o?f(j)?_()&&Z()&&te("data")&&z():$(new W(a,ne))&&te("dimension"):Z()&&te("data")&&z();break;case"number-fraction":a.type="number",t(o)?a.append(o):37==o?Z(new P(a))&&te("data"):69==o||101==o?t(j())?K()&&a.append([101,o])&&te("sci-notation"):43!=j(1)&&45!=j(1)||!t(j(2))?$(new W(a,o))&&te("dimension"):a.append([101,j(1),j(2)])&&K(2)&&te("sci-notation"):45==o?u(j())?K()&&$(new W(a,[45,o]))&&te("dimension"):92==j(1)&&f(j(2))?_()&&Z()&&te("data")&&z():92==j(1)?K()&&$(new W(a,[45,ne()]))&&te("dimension"):Z()&&te("data")&&z():u(o)?$(new W(a,o))&&te("dimension"):92==o?f(j)?_()&&Z()&&te("data")&&z():$(new W(a,ne()))&&te("dimension"):Z()&&te("data")&&z();break;case"dimension":p(o)?a.append(o):92==o?f(j())?_()&&Z()&&te("data")&&z():a.append(ne()):Z()&&te("data")&&z();break;case"sci-notation":a.type="number",t(o)?a.append(o):Z()&&te("data")&&z();break;case"url":Q()?_()&&Z(new v)&&te("data"):34==o?te("url-double-quote"):39==o?te("url-single-quote"):41==o?Z(new x)&&te("data"):l(o)?V():te("url-unquoted")&&z();break;case"url-double-quote":a instanceof x||$(new x),Q()?_()&&Z(new v)&&te("data"):34==o?te("url-end"):c(o)?_()&&te("bad-url"):92==o?c(j())?K():f(j())?_()&&Z(new v)&&te("data")&&z():a.append(ne()):a.append(o);break;case"url-single-quote":a instanceof x||$(new x),Q()?_()&&Z(new v)&&te("data"):39==o?te("url-end"):c(o)?_()&&te("bad-url"):92==o?c(j())?K():f(j())?_()&&Z(new v)&&te("data")&&z():a.append(ne()):a.append(o);break;case"url-end":Q()?_()&&Z(new v)&&te("data"):l(o)?V():41==o?Z()&&te("data"):_()&&te("bad-url")&&z();break;case"url-unquoted":a instanceof x||$(new x),Q()?_()&&Z(new v)&&te("data"):l(o)?te("url-end"):41==o?Z()&&te("data"):34==o||39==o||40==o||s(o)?_()&&te("bad-url"):92==o?f(j())?_()&&te("bad-url"):a.append(ne()):a.append(o);break;case"bad-url":Q()?_()&&Z(new v)&&te("data"):41==o?Z(new v)&&te("data"):92==o?f(j())?V():ne():V();break;case"unicode-range":for(var re=[o],oe=[o],ae=1;6>ae&&n(j());ae++)K(),re.push(o),oe.push(o);if(63==j()){for(;6>ae&&63==j();ae++)K(),re.push("0".charCodeAt(0)),oe.push("f".charCodeAt(0));Z(new G(re,oe))&&te("data")}else if(45==j(1)&&n(j(2))){K(),K(),oe=[o];for(var ae=1;6>ae&&n(j());ae++)K(),oe.push(o);Z(new G(re,oe))&&te("data")}else Z(new G(re))&&te("data");break;default:ee("Unknown state '"+h+"'")}}}function h(e){return String.fromCharCode.apply(null,e.filter(function(e){return e}))}function y(e){return this}function w(){return this}function v(){return this}function k(){return this}function m(){return this}function S(){return this}function g(){return this}function T(){return this}function b(){return this}function E(){return this}function N(){return this}function O(){return this}function C(){return this}function I(){return this}function A(){return this}function R(e){return this.value=String.fromCharCode(e),this}function U(){return this}function D(e){this.value=[],this.append(e)}function L(e){this.value=e.finish().value}function M(e){this.value=[],this.append(e)}function H(e){this.value=[],this.append(e)}function F(e){this.value=[],this.append(e)}function x(e){this.value=[],this.append(e)}function J(e){this.value=[],this.append(e),this.type="integer"}function P(e){e.finish(),this.value=e.value,this.repr=e.repr}function W(e,t){e.finish(),this.num=e.value,this.unit=[],this.repr=e.repr,this.append(t)}function G(e,t){return e=parseInt(h(e),16),t=void 0===t?e+1:parseInt(h(t),16),e>B&&(t=e),e>t&&(t=e),t>B&&(t=B),this.start=e,this.end=t,this}var q=function(e,t,n){return e>=t&&n>=e},B=1114111;y.prototype.finish=function(){return this},y.prototype.toString=function(){return this.tokenType},y.prototype.toSourceString=y.prototype.toString,y.prototype.toJSON=function(){return this.toString()},w.prototype=new y,w.prototype.tokenType="BADSTRING",v.prototype=new y,v.prototype.tokenType="BADURL",k.prototype=new y,k.prototype.tokenType="WHITESPACE",k.prototype.toString=function(){return"WS"},k.prototype.toSourceString=function(){return" "},m.prototype=new y,m.prototype.tokenType="CDO",S.prototype=new y,S.prototype.tokenType="CDC",g.prototype=new y,g.prototype.tokenType=":",T.prototype=new y,T.prototype.tokenType=";",b.prototype=new y,b.prototype.tokenType="{",E.prototype=new y,E.prototype.tokenType="}",N.prototype=new y,N.prototype.tokenType="[",O.prototype=new y,O.prototype.tokenType="]",C.prototype=new y,C.prototype.tokenType="(",I.prototype=new y,I.prototype.tokenType=")",A.prototype=new y,A.prototype.tokenType="EOF",R.prototype=new y,R.prototype.tokenType="DELIM",R.prototype.toString=function(){return"DELIM("+this.value+")"},R.prototype.toSourceString=function(){return this.value},U.prototype=new y,U.prototype.append=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.value.push(e[t]);else this.value.push(e);return!0},U.prototype.finish=function(){return this.value=this.valueAsString(),this},U.prototype.ASCIImatch=function(e){return this.valueAsString().toLowerCase()==e.toLowerCase()},U.prototype.valueAsString=function(){return"string"==typeof this.value?this.value:h(this.value)},U.prototype.valueAsCodes=function(){if("string"==typeof this.value){for(var e=[],t=0;t<this.value.length;t++)e.push(this.value.charCodeAt(t));return e}return this.value.filter(function(e){return e})},D.prototype=new U,D.prototype.tokenType="IDENT",D.prototype.toString=function(){return"IDENT("+this.value+")"},D.prototype.toSourceString=function(){return this.value},L.prototype=new U,L.prototype.tokenType="FUNCTION",L.prototype.toString=function(){return"FUNCTION("+this.value+")"},L.prototype.toSourceString=function(){return this.value},M.prototype=new U,M.prototype.tokenType="AT-KEYWORD",M.prototype.toString=function(){return"AT("+this.value+")"},M.prototype.toSourceString=function(){return"@"+this.value},H.prototype=new U,H.prototype.tokenType="HASH",H.prototype.toString=function(){return"HASH("+this.value+")"},H.prototype.toSourceString=function(){return"#"+this.value},F.prototype=new U,F.prototype.tokenType="STRING",F.prototype.toString=function(){return'"'+this.value+'"'},F.prototype.toSourceString=F.prototype.toString,x.prototype=new U,x.prototype.tokenType="URL",x.prototype.toString=function(){return"URL("+this.value+")"},x.prototype.toSourceString=function(){return"url('"+this.value+"')"},J.prototype=new U,J.prototype.tokenType="NUMBER",J.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},J.prototype.toSourceString=function(){return"integer"==this.type?this.value:this.value},J.prototype.finish=function(){return this.repr=this.valueAsString(),this.value=1*this.repr,Math.abs(this.value)%1!=0&&(this.type="number"),this},P.prototype=new y,P.prototype.tokenType="PERCENTAGE",P.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},P.prototype.toSourceString=function(){return this.value+"%"},W.prototype=new y,W.prototype.tokenType="DIMENSION",W.prototype.toString=function(){return"DIM("+this.num+","+this.unit+")"},W.prototype.toSourceString=function(){return this.num+this.unit},W.prototype.append=function(e){if(e instanceof Array)for(var t=0;t<e.length;t++)this.unit.push(e[t]);else this.unit.push(e);return!0},W.prototype.finish=function(){return this.unit=h(this.unit),this.repr+=this.unit,this},G.prototype=new y,G.prototype.tokenType="UNICODE-RANGE",G.prototype.toString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},G.prototype.toSourceString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},G.prototype.contains=function(e){return e>=this.start&&e<this.end},e.tokenize=d}),function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof exports?exports:e)}(this,function(e){function t(e){function t(){switch(l.tokenType){case"(":case"[":case"{":return n();case"FUNCTION":return c();default:return l}}function n(){for(var e={"(":")","[":"]","{":"}"}[l.tokenType],n=new u(l.tokenType);;)switch(v(),l.tokenType){case"EOF":case e:return n;default:n.append(t())}}function c(){for(var e=new p(l.value),n=new s;;)switch(v(),l.tokenType){case"EOF":case")":return e.append(n),e;case"DELIM":","==l.value?(e.append(n),n=new s):n.append(l);break;default:n.append(t())}}for(var l,f="top-level",d=-1,h=new r,y=[h],w=y[0],v=function(t){return void 0===t&&(t=1),d+=t,l=d<e.length?e[d]:new EOFToken,!0},k=function(){return d--,!0},m=function(){return e[d+1]},S=function(e){return void 0===e?""!==w.fillType?f=w.fillType:"STYLESHEET"==w.type?f="top-level":(console.log("Unknown rule-type while switching to current rule's content mode: ",w),f=""):f=e,!0},g=function(e){return w=e,y.push(w),!0},T=function(e){return console.log("Parse error at token "+d+": "+l+".\n"+e),!0},b=function(){var e=y.pop();return w=y[y.length-1],w.append(e),!0},E=function(){return y.pop(),w=y[y.length-1],!0},N=function(){for(;y.length>1;)b()};;)if(v(),"DELIM"!==l.tokenType||"\r"!==l.value)switch(f){case"top-level":switch(l.tokenType){case"CDO":case"CDC":case"WHITESPACE":break;case"AT-KEYWORD":g(new o(l.value))&&S("at-rule");break;case"{":T("Attempt to open a curly-block at top-level.")&&t();break;case"EOF":return N(),h;default:g(new a)&&S("selector")&&k()}break;case"at-rule":switch(l.tokenType){case";":b()&&S();break;case"{":""!==w.fillType?S(w.fillType):T("Attempt to open a curly-block in a statement-type at-rule.")&&E()&&S("next-block")&&k();break;case"EOF":return N(),h;default:w.appendPrelude(t())}break;case"rule":switch(l.tokenType){case"WHITESPACE":break;case"}":b()&&S();break;case"AT-KEYWORD":g(new o(l.value))&&S("at-rule");break;case"EOF":return N(),h;default:g(new a)&&S("selector")&&k()}break;case"selector":switch(l.tokenType){case"{":S("declaration");break;case"EOF":return E()&&N(),h;default:w.appendSelector(t())}break;case"declaration":switch(l.tokenType){case"WHITESPACE":case";":break;case"}":b()&&S();break;case"AT-RULE":g(new o(l.value))&&S("at-rule");break;case"IDENT":g(new i(l.value))&&S("after-declaration-name");break;case"EOF":return N(),h;default:T()&&E()&&S("next-declaration")}break;case"after-declaration-name":switch(l.tokenType){case"WHITESPACE":break;case":":S("declaration-value");break;case";":T("Incomplete declaration - semicolon after property name.")&&E()&&S();break;case"EOF":return E()&&N(),h;default:T("Invalid declaration - additional token after property name")&&E()&&S("next-declaration")}break;case"declaration-value":switch(l.tokenType){case"DELIM":"!"==l.value&&"IDENTIFIER"==m().tokenType&&"important"==m().value.toLowerCase()?(v(),w.important=!0,S("declaration-end")):w.append(l);break;case";":b()&&S();break;case"}":b()&&b()&&S();break;case"EOF":return N(),h;default:w.append(t())}break;case"declaration-end":switch(l.tokenType){case"WHITESPACE":break;case";":b()&&S();break;case"}":b()&&b()&&S();break;case"EOF":return N(),h;default:T("Invalid declaration - additional token after !important.")&&E()&&S("next-declaration")}break;case"next-block":switch(l.tokenType){case"{":t()&&S();break;case"EOF":return N(),h;default:t()}break;case"next-declaration":switch(l.tokenType){case";":S("declaration");break;case"}":S("declaration")&&k();break;case"EOF":return N(),h;default:t()}break;default:return void console.log("Unknown parsing mode: "+f)}}function n(){return this}function r(){return this.value=[],this}function o(e){return this.name=e,this.prelude=[],this.value=[],e in o.registry&&(this.fillType=o.registry[e]),this}function a(){return this.selector=[],this.value=[],this}function i(e){return this.name=e,this.value=[],this}function u(e){return this.name=e,this.value=[],this}function p(e){return this.name=e,this.value=[],this}function s(){return this.value=[],this}n.prototype.fillType="",n.prototype.toString=function(e){return JSON.stringify(this.toJSON(),null,e)},n.prototype.append=function(e){return this.value.push(e),this},r.prototype=new n,r.prototype.type="STYLESHEET",r.prototype.toJSON=function(){return{type:"stylesheet",value:this.value.map(function(e){return e.toJSON()})}},o.prototype=new n,o.prototype.type="AT-RULE",o.prototype.appendPrelude=function(e){return this.prelude.push(e),this},o.prototype.toJSON=function(){return{type:"at",name:this.name,prelude:this.prelude.map(function(e){return e.toJSON()}),value:this.value.map(function(e){return e.toJSON()})}},o.registry={"import":"",media:"rule","font-face":"declaration",page:"declaration",keyframes:"rule",namespace:"","counter-style":"declaration",supports:"rule",document:"rule","font-feature-values":"declaration",viewport:"","region-style":"rule"},a.prototype=new n,a.prototype.type="STYLE-RULE",a.prototype.fillType="declaration",a.prototype.appendSelector=function(e){return this.selector.push(e),this},a.prototype.toJSON=function(){return{type:"selector",selector:this.selector.map(function(e){return e.toJSON()}),value:this.value.map(function(e){return e.toJSON()})}},i.prototype=new n,i.prototype.type="DECLARATION",i.prototype.toJSON=function(){return{type:"declaration",name:this.name,value:this.value.map(function(e){return e.toJSON()})}},u.prototype=new n,u.prototype.type="BLOCK",u.prototype.toJSON=function(){return{type:"block",name:this.name,value:this.value.map(function(e){return e.toJSON()})}},p.prototype=new n,p.prototype.type="FUNCTION",p.prototype.toJSON=function(){return{type:"func",name:this.name,value:this.value.map(function(e){return e.toJSON()})}},s.prototype=new n,s.prototype.type="FUNCTION-ARG",s.prototype.toJSON=function(){return this.value.map(function(e){return e.toJSON()})},e.parse=t}),function(){var e,t,n,r,o;e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=function(){var t,n,r;for(r=!1,n=0;n<e.length;){try{r=e[n++]()}catch(o){t=o;continue}break}return r},t=function(e,t){var r;r=n(),r.onreadystatechange=function(){if(4===r.readyState){if(200!==r.status)throw"Error!";t(r.responseText)}},r.open("GET",e,!0),r.send()},r=function(){var e,t;return e=0,t=0,window.innerHeight?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&document.documentElement.clientHeight?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(e=document.body.clientWidth,t=document.body.clientHeight),{width:e,height:t}},(o=function(){var e,n,o,a,i,u,p,s,c,l,f,d;for(e=function(e){var t,n,r,o,a,i,u,p,s,c;for(n=[],s=e.value,a=0,u=s.length;u>a;a++){for(t=s[a],r=!1,c=t.value,i=0,p=c.length;p>i;i++)o=c[i],"DIMENSION"!==o.tokenType||"vmin"!==o.unit&&"vh"!==o.unit&&"vw"!==o.unit||(r=!0);r&&n.push(t)}return e.value=n,n},n=function(t){var r,o,a,i,u,p,s;for(i=[],s=t.value,u=0,p=s.length;p>u;u++)switch(a=s[u],a.type){case"STYLE-RULE":o=e(a),0!==o.length&&i.push(a);break;case"AT-RULE":r=n(a),0!==r.length&&i.push(a)}return t.value=i,i},p=function(){var e,t,n,o,a,i,u,p,s;s=r(),t={vh:s.height/100,vw:s.width/100},t.vmin=Math.min(t.vh,t.vw),p=s.width/s.height,a=function(e,t){var n,r,o,a;if(null!=e.map)return e.map(t);for(n=[],o=0,a=e.length;a>o;o++)r=e[o],n.push(t(r));return n},n=function(e){var n,r,o,i,u,p,s,c,l,f;for(r=[],o=a(e.selector,function(e){return null!=e.toSourceString?e.toSourceString():""}).join(""),o+="{",l=e.value,u=0,s=l.length;s>u;u++){for(n=l[u],o+=n.name,o+=":",f=n.value,p=0,c=f.length;c>p;p++)i=f[p],o+="DIMENSION"!==i.tokenType||"vmin"!==i.unit&&"vh"!==i.unit&&"vw"!==i.unit?i.toSourceString():""+Math.floor(i.num*t[i.unit])+"px";o+=";"}return o+="}\r"},o=function(e){var t,r,i,u,s,c,l,f,d,h,y,w,v,k,m,S,g,T,b,E;for(s="",g=e.value,d=0,v=g.length;v>d;d++)switch(u=g[d],u.type){case"STYLE-RULE":s+=n(u);break;case"AT-RULE":if("media"===u.name){for(i="",t=!1,r=[],T=u.prelude,h=0,k=T.length;k>h;h++)if(l=T[h],"("===l.name){for(i+="(",b=l.value,y=0,m=b.length;m>y;y++)f=b[y],c=null!=f.toSourceString?f.toSourceString():"","IDENT"===f.tokenType&&"max-aspect-ratio"===c&&(t=!0),"NUMBER"===f.tokenType&&r.push(parseInt(c)),i+=c;i+=")"}else i+=l.toSourceString();p<r[0]/r[1]&&(s+=o(u))}else{for(i="",E=u.prelude,w=0,S=E.length;S>w;w++)l=E[w],"("===l.name?(i+="(",i+=a(l.value,function(e){return null!=e.toSourceString?e.toSourceString():""}).join(""),i+=")"):i+=l.toSourceString();s+="@"+u.name+" "+i+" {",s+=o(u),s+="}\n"}}return s},e="";for(u in c)i=c[u],e+=o(i);return null!=l.styleSheet?l.styleSheet.cssText=e:l.innerHTML=e},c={},l=document.createElement("style"),o=document.getElementsByTagName("head")[0],o.appendChild(l),u=document.getElementsByTagName("link"),i=0,s=0,f=0,d=u.length;d>f;f++)a=u[f],"stylesheet"===a.rel&&(i++,t(a.href,function(e){var t,r;r=tokenize(e),t=parse(r),n(t),c[a.href]=t,s++,s===i&&window.onresize()}));window.onresize=p})()}.call(this);